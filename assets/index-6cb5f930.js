import{T as y,b as m,g as n}from"./index-d86e2183.js";import{l as f}from"./logo-fe282105.js";import{a as g,h as p,x as a,n as c,m as h,t as r,e as v}from"./vendor-de9f6d0d.js";var w=Object.defineProperty,x=Object.getOwnPropertyDescriptor,i=(e,t,o,d)=>{for(var l=d>1?void 0:d?x(t,o):t,b=e.length-1,u;b>=0;b--)(u=e[b])&&(l=(d?u(t,o,l):u(l))||l);return d&&l&&w(t,o,l),l};let s=class extends y({}){constructor(){super(...arguments),this.bindBridge=new g(this,m),this.twitter="",this.shareHolder="",this.buying=!1,this.selling=!1,this.supply=n("Fans3Shares",{address:"0xa026b720ec05f37e161c65bbe39fda5e0f6ebb9f"}).then(e=>e.sharesSupply(this.shareHolder).then(t=>(console.log(t),t))),this.price=n("Fans3Shares",{address:"0xa026b720ec05f37e161c65bbe39fda5e0f6ebb9f"}).then(e=>e.getBuyPrice(this.shareHolder,1).then(t=>p(t))),this.buyPrice=n("Fans3Shares",{address:"0xa026b720ec05f37e161c65bbe39fda5e0f6ebb9f"}).then(e=>e.getBuyPriceAfterFee(this.shareHolder,1).then(t=>p(t))),this.sellPrice=n("Fans3Shares",{address:"0xa026b720ec05f37e161c65bbe39fda5e0f6ebb9f"}).then(e=>e.getSellPriceAfterFee(this.shareHolder,1).then(t=>p(t)))}get account(){return m.account}link(){}async buy(){this.buying=!0;try{let e=await n("Fans3Shares",{address:"0xa026b720ec05f37e161c65bbe39fda5e0f6ebb9f"}),t=await e.getBuyPriceAfterFee(this.shareHolder,1);await(await e.buyShares(this.shareHolder,1,{value:t})).wait()}catch(e){this.err=e}this.buying=!1}async sell(){this.selling=!0;try{await(await(await n("Fans3Shares",{address:"0xa026b720ec05f37e161c65bbe39fda5e0f6ebb9f"})).sellShares(this.shareHolder,1)).wait()}catch(e){this.err=e}this.selling=!1}render(){return a`<div class="home"><div class="ui-container my-4"><img class="w-24 object-contain select-none pointer-events-none" src="${f}"></div><div class="ui-container"><div class="my-4">Wallet Address:<connect-wallet-btn></connect-wallet-btn></div><div class="my-4 ${c(!this.twitter,()=>"hidden")}">Twitter: ${this.twitter}</div><div class="my-4"><span>You are viewing ${this.shareHolder}'s shares</span><br><span>Holding: ${h(this.supply,a`<i class="text-sm mdi mdi-loading"></i>`)}</span><br><span>Price: ${h(this.price,a`<i class="text-sm mdi mdi-loading"></i>`)}</span></div><div class="my-4 ${c(this.account,()=>"hidden")}">Connect your wallet to buy/sell shares</div><div class="my-4 ${c(this.twitter,()=>"hidden")}"><ui-button sm class="my-2" @click="${this.link}">Link your twitter to buy/sell shares</ui-button></div><div class="my-4">Buy price: ${h(this.buyPrice,a`<i class="ml-2 text-sm mdi mdi-loading"></i>`)}<ui-button sm class="m-2" ?disabled="${this.buying}" @click="${this.buy}">Buy${c(this.buying,()=>a`<i class="ml-2 text-sm mdi mdi-loading"></i>`)}</ui-button><br>Sell price: ${h(this.sellPrice,a`<i class="ml-2 text-sm mdi mdi-loading"></i>`)}<ui-button sm class="m-2" ?disabled="${this.selling}" @click="${this.sell}">Sell${c(this.selling,()=>a`<i class="ml-2 text-sm mdi mdi-loading"></i>`)}</ui-button></div>${c(this.err,()=>a`<span class="text-red-500">${this.err}</span>`)}</div></div>`}};i([r()],s.prototype,"twitter",2);i([r()],s.prototype,"shareHolder",2);i([r()],s.prototype,"buying",2);i([r()],s.prototype,"selling",2);i([r()],s.prototype,"err",2);i([r()],s.prototype,"supply",2);i([r()],s.prototype,"price",2);i([r()],s.prototype,"buyPrice",2);i([r()],s.prototype,"sellPrice",2);s=i([v("view-ex")],s);export{s as ViewEx};
