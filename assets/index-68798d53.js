import{T as v,b as y,g as h}from"./index-fe06ba43.js";import{C as u,l as w}from"./constants-df4c2998.js";import{a as g,x as s,h as b,m,n as c,t as l,e as $}from"./vendor-38c8194b.js";const S="";var f=Object.defineProperty,x=Object.getOwnPropertyDescriptor,n=(t,e,i,o)=>{for(var a=o>1?void 0:o?x(e,i):e,d=t.length-1,p;d>=0;d--)(p=t[d])&&(a=(o?p(e,i,a):p(a))||a);return o&&a&&f(e,i,a),a};let r=class extends v(S){constructor(){super(...arguments),this.bindBridge=new g(this,y),this.twitter="",this.creating=!1,this.supply=0,this.updateSupply=h("Fans3Shares",{address:u}).then(t=>t.sharesSupply(this.account).then(e=>(this.supply=e,e)).catch(()=>0)),this.holders=h("Fans3Shares",{address:u}).then(t=>t.getFansOfSubject(this.account).then(e=>s`<ul>${b(e,i=>s`<li>${i}: ${m(this.holding(i))}</li>`)}</ul>`))}get account(){return y.account}link(){this.twitter="VitalikButerin"}async create(){this.creating=!0;try{let t=await h("Fans3Shares",{address:u}),e=await t.getBuyPriceAfterFee(this.account,1);await(await t.buyShares(this.account,1,{value:e})).wait(),this.updateSupply}catch(t){this.err=t}this.creating=!1}holding(t){return h("Fans3Shares",{address:u}).then(e=>e.sharesBalance(this.account,t).then(i=>i).catch(()=>0))}render(){return s`<div class="home"><div class="ui-container my-4"><img class="w-24 object-contain select-none pointer-events-none" src="${w}"></div><div class="ui-container">${c(this.err,()=>s`<span class="text-red-500">${this.err}</span>`)}<div class="my-4">Wallet Address:<connect-wallet-btn></connect-wallet-btn></div><div class="my-4 ${c(this.twitter,()=>"hidden")}">Link your twitter to continue<ui-button @click="${this.link}" class="ml-2" sm>Link</ui-button></div><div class="my-4 ${c(!this.twitter,()=>"hidden")}">Twitter: ${this.twitter}</div>${c(this.account&&this.twitter,()=>s`<ui-button href="/x/${this.account}" class="my-2" sm>Link to buy my share</ui-button><div class="my-4"><span class="my-2">${m(this.updateSupply,s`<i class="ml-2 text-sm mdi mdi-loading"></i>`)} holdings</span><br>${c(this.supply,()=>s`${m(this.holders,s`<i class="ml-2 text-sm mdi mdi-loading"></i>`)}`,()=>s`<ui-button sm class="my-2" ?disabled="${this.creating}" @click="${this.create}">Create${c(this.creating,()=>s`<i class="ml-2 text-sm mdi mdi-loading"></i>`)}</ui-button>`)}</div>`)}</div></div>`}};n([l()],r.prototype,"twitter",2);n([l()],r.prototype,"creating",2);n([l()],r.prototype,"err",2);n([l()],r.prototype,"supply",2);n([l()],r.prototype,"updateSupply",2);n([l()],r.prototype,"holders",2);r=n([$("view-home")],r);export{r as ViewHome};
